webpackJsonp([11],{"+bdf":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("va-box",{attrs:{title:t.title,theme:"box-primary",isBorder:!0,widgetType:""}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("div",{staticClass:"form-horizontal"},[a("div",{staticClass:"box-body"},[t._l(t.checkItems,function(e,i){return a("div",{class:{"col-md-5":!0,"col-md-offset-1":i%2==1}},["text"===e.type?a("div",{staticClass:"form-group"},[a("label",{staticClass:"col-sm-3 control-label"},[a("span",[t._v(t._s(e.title)+":")])]),t._v(" "),a("div",{staticClass:"col-sm-9"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"item.value"}],staticClass:"form-control",attrs:{type:"text",placeholder:e.placeholder},domProps:{value:e.value},on:{input:function(t){t.target.composing||(e.value=t.target.value)}}})])]):"select"===e.type?a("div",{staticClass:"form-group"},[a("label",{staticClass:"col-sm-3 control-label"},[a("span",[t._v(t._s(e.title))])]),t._v(" "),a("div",{staticClass:"col-sm-9"},[a("select",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"item.value"}],staticClass:"form-control",on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});e.value=t.target.multiple?a:a[0]}}},[a("option",{attrs:{value:""}},[t._v("请选择")]),t._v(" "),t._l(t.options,function(e,i){return a("option",{domProps:{value:e.value}},[t._v(t._s(e.label))])})],2)])]):t._e()])}),t._v(" "),a("div",{staticClass:"col-md-1"},[a("div",{staticClass:"form-group",attrs:{align:"right"}},[a("button",{staticClass:"btn btn-primary",on:{click:t.checkInfo}},[a("span",{staticClass:"fa  fa-search"},[t._v("查    询")])])])])],2)])])])},s=[],n={render:i,staticRenderFns:s};e.a=n},"4Dmm":function(t,e,a){"use strict";var i=a("HM+n");e.a={name:"YFCheckModule",data:function(){return{}},created:function(){console.log(this.title)},props:["checkItems","title","options","radios"],components:{"va-box":i.a},methods:{checkInfo:function(){this.$emit("checkBtnClick")}}}},"9IEN":function(t,e,a){e=t.exports=a("FZ+f")(!1),e.push([t.i,".checkbox[data-v-325a5ad9]{margin-top:0;margin-bottom:0}.table[data-v-325a5ad9]{margin-top:0}.box[data-v-325a5ad9]{margin-top:10px}",""])},Aesy:function(t,e,a){"use strict";e.a={name:"yf-right"}},GLNZ:function(t,e,a){"use strict";var i=a("Xxa5"),s=a.n(i),n=a("exGp"),c=a.n(n),r=a("WmRa"),o=a("qYpY"),l=a("auua");e.a={name:"operate-role-api",data:function(){return{title:"角色接口查询",modalTitle:"",tableData:[],roleId:"",checkItems:[{title:"角色ID",placeholder:"请输入角色ID",value:"",type:"text"}],tableHeader:["接口ID","接口名称","调用名称","绑定关系","角色状态","操作"],checkModel:{},apiStatus:{},operData:{},clearStatus:!1}},created:function(){var t=this.$route.query.id;console.log("created",this.$route.query.id),void 0!=t&&""!=t&&(this.checkItems[0].value=t,this.searchInfo())},mounted:function(){},components:{"yf-checkmodule":r.a,"yf-right":o.a,"yf-table-bind":l.a},methods:{checkBtnClick:function(){""==this.checkItems[0].value?alert("请输入角色ID"):this.searchInfo()},searchInfo:function(){function t(){return e.apply(this,arguments)}var e=c()(s.a.mark(function t(){var e,a,i,n,c,r,o;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.roleId=this.checkItems[0].value,""!=this.roleId){t.next=3;break}return t.abrupt("return");case 3:return e={roleId:this.roleId},a={action:"system.app.api.bind.query",body:e},i=this,t.next=8,i.$http.post("http://d.umq.me/japi-manage/v1/gateway",a);case 8:n=t.sent,c=n.data,r=c.code,o=c.body,"00000"===r&&(i.tableData=o,i.tableData.forEach(function(t){t.list.forEach(function(t){i.apiStatus[t.id]=t.bind})},this));case 13:case"end":return t.stop()}},t,this)}));return t}(),roleApiBind:function(){function t(){return e.apply(this,arguments)}var e=c()(s.a.mark(function t(){var e,a,i,n,c,r;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e={action:"system.role.api.bind",body:this.operData},a=this,t.next=4,a.$http.post("http://d.umq.me/japi-manage/v1/gateway",e);case 4:i=t.sent,n=i.data,c=n.code,r=n.body,"00000"===c&&(this.operData={},this.clearStatus=!this.clearStatus,this.searchInfo());case 9:case"end":return t.stop()}},t,this)}));return t}(),bindApi:function(){this.removeMatchCondition(1,1),this.roleApiBind()},cancelBindApi:function(){this.removeMatchCondition(0,2),this.roleApiBind()},removeMatchCondition:function(t,e){var a=this,i=[];for(var s in a.checkModel)a.checkModel[s].forEach(function(e){console.log("vm.apiStatus[apiId]",a.apiStatus[e]),a.apiStatus[e]!=t&&(console.log("apiId",e),i.push({roleId:a.roleId,apiId:e+""}))});a.operData={binds:i,handle:e}},checkCountChange:function(t){this.checkModel[t[0]]=t[1]},operaApiBind:function(t){var e=1;e=1==t[0]?1:2,this.operData={binds:[{roleId:this.roleId,apiId:t[1]+""}],handle:e},this.roleApiBind()}}}},"HM+n":function(t,e,a){"use strict";var i=a("Rm/k"),s=a("ZFrQ"),n=a("VU/8"),c=n(i.a,s.a,null,null,null);e.a=c.exports},JnIT:function(t,e,a){e=t.exports=a("FZ+f")(!1),e.push([t.i,".col-sm-3[data-v-14518542]{padding-right:5px;padding-left:0}",""])},"Rm/k":function(t,e,a){"use strict";e.a={name:"va-box",props:{widgetType:{type:String,default:"collapse"},title:{type:String},content:{type:String},theme:{type:String},isOpen:{type:Boolean,default:!0},isLoading:{type:Boolean,default:!1},isSolid:{type:Boolean,default:!1},isBorder:{type:Boolean,default:!1}},computed:{btnIcon:function(){return"collapse"===this.widgetType?this.isOpen?"fa fa-minus":"fa fa-plus":"remove"===this.widgetType?"fa fa-times":""}},created:function(){}}},TlX0:function(t,e,a){"use strict";e.a={name:"table-bind",data:function(){return{checkAll:!1,checkIds:[]}},props:["tableHeader","arr","arrIndex","clearStatus"],methods:{bindApi:function(t){this.$emit("operaApiBind",[1,t])},cancelBindApi:function(t){this.$emit("operaApiBind",[0,t])},changeState:function(){this.checkIds=[],1==this.checkAll&&this.arr.list.forEach(function(t){this.checkIds.push(t.id)},this)},apiSatus:function(t){var e="";switch(t){case 1:e="正常";break;case 2:e="开发中";break;case 3:e="测试中";break;case 9:e="禁用"}return e},apiBindStatus:function(t){var e="";switch(t){case 1:e="已经绑定";break;case 0:e="未绑定"}return e}},watch:{checkIds:{handler:function(){this.checkIds.length==this.arr.list.length?this.checkAll=!0:this.checkAll=!1,this.$emit("checkCountChange",[this.arrIndex,this.checkIds])},deep:!0},clearStatus:{handler:function(){this.checkIds=[]}}}}},WmRa:function(t,e,a){"use strict";function i(t){a("upzl")}var s=a("4Dmm"),n=a("+bdf"),c=a("VU/8"),r=i,o=c(s.a,n.a,r,"data-v-14518542",null);e.a=o.exports},ZFrQ:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"box",class:[t.theme,this.isOpen?"":"collapsed-box",t.isSolid?"box-solid":""]},[a("div",{staticClass:"box-header",class:t.isBorder||t.isSolid?"with-border":""},[t._t("icon-title"),t._v(" "),a("h3",{staticClass:"box-title"},[t._v(t._s(t.title))]),t._v(" "),t._m(0)],2),t._v(" "),a("div",{staticClass:"box-body"},[t._t("content")],2),t._v(" "),t.$slots.footer?a("div",{staticClass:"box-footer"},[t._t("footer")],2):t._e(),t._v(" "),this.isLoading?a("div",{staticClass:"overlay"},[a("i",{staticClass:"fa fa-refresh fa-spin"})]):t._e()])},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"box-tools pull-right"},[a("button",{staticClass:"btn btn-box-tool",attrs:{type:"button","data-widget":"collapse"}},[a("i",{staticClass:"fa fa-minus"})])])}],n={render:i,staticRenderFns:s};e.a=n},auua:function(t,e,a){"use strict";function i(t){a("ovaj")}var s=a("TlX0"),n=a("eCjj"),c=a("VU/8"),r=i,o=c(s.a,n.a,r,"data-v-325a5ad9",null);e.a=o.exports},eCjj:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("row",[a("div",{staticClass:"col-xs-12"},[a("div",{staticClass:"box"},[a("div",{staticClass:"box-header"},[a("h3",{staticClass:"box-title"},[t._v(t._s(t.arr.name))])]),t._v(" "),a("div",{staticClass:"box-body table-responsive no-padding"},[a("table",{staticClass:"table table-hover"},[a("tbody",[a("tr",t._l(t.tableHeader,function(e,i){return a("th",{key:"app"+i},[0===i?a("div",{staticClass:"checkbox"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.checkAll,expression:"checkAll"}],attrs:{type:"checkbox",id:"group"+t.arrIndex},domProps:{value:"group"+t.arrIndex,checked:Array.isArray(t.checkAll)?t._i(t.checkAll,"group"+t.arrIndex)>-1:t.checkAll},on:{click:t.changeState,__c:function(e){var a=t.checkAll,i=e.target,s=!!i.checked;if(Array.isArray(a)){var n="group"+t.arrIndex,c=t._i(a,n);i.checked?c<0&&(t.checkAll=a.concat([n])):c>-1&&(t.checkAll=a.slice(0,c).concat(a.slice(c+1)))}else t.checkAll=s}}}),t._v(" "),a("label",{attrs:{for:"group"+t.arrIndex}},[t._v(t._s(e))])]):a("label",[t._v(t._s(e))])])})),t._v(" "),t._l(t.arr.list,function(e,i){return a("tr",{key:"apidata"+i,staticStyle:{width:"100%"}},[a("td",{staticStyle:{width:"15%"}},[a("div",{staticClass:"checkbox"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.checkIds,expression:"checkIds"}],class:"group"+t.arrIndex,attrs:{type:"checkbox",id:e.id},domProps:{value:e.id,checked:Array.isArray(t.checkIds)?t._i(t.checkIds,e.id)>-1:t.checkIds},on:{__c:function(a){var i=t.checkIds,s=a.target,n=!!s.checked;if(Array.isArray(i)){var c=e.id,r=t._i(i,c);s.checked?r<0&&(t.checkIds=i.concat([c])):r>-1&&(t.checkIds=i.slice(0,r).concat(i.slice(r+1)))}else t.checkIds=n}}}),t._v(" "),a("label",{attrs:{for:e.id}},[t._v(t._s(e.id))])])]),t._v(" "),a("td",{staticStyle:{width:"15%"}},[t._v(t._s(e.name))]),t._v(" "),a("td",{staticStyle:{width:"15%"}},[t._v(t._s(e.action))]),t._v(" "),a("td",{staticStyle:{width:"10%"}},[t._v(t._s(t.apiBindStatus(e.bind)))]),t._v(" "),a("td",{staticStyle:{width:"10%"}},[t._v(t._s(t.apiSatus(e.status)))]),t._v(" "),a("td",{staticStyle:{width:"15%"}},[0==e.bind?a("button",{staticClass:"btn btn-success",on:{click:function(a){t.bindApi(e.id)}}},[t._v("绑定")]):t._e(),t._v(" "),1==e.bind?a("button",{staticClass:"btn btn-danger",on:{click:function(a){t.cancelBindApi(e.id)}}},[t._v("解绑")]):t._e()])])})],2)])])])])])},s=[],n={render:i,staticRenderFns:s};e.a=n},oNS5:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{staticClass:"text-center"},[t._v("版权归@2017-2018 优麦圈所有")])},s=[],n={render:i,staticRenderFns:s};e.a=n},ovaj:function(t,e,a){var i=a("9IEN");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a("rjj0")("45abf1c9",i,!0)},qYpY:function(t,e,a){"use strict";var i=a("Aesy"),s=a("oNS5"),n=a("VU/8"),c=n(i.a,s.a,null,null,null);e.a=c.exports},sStd:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("row",[a("div",{staticClass:"col-md-12"},[a("yf-checkmodule",{attrs:{title:t.title,checkItems:t.checkItems},on:{checkBtnClick:t.checkBtnClick}})],1)]),t._v(" "),t.tableData.length>0?a("row",[a("div",{staticClass:"col-md-12"},[a("button",{staticClass:"btn btn-primary",on:{click:t.bindApi}},[t._v("批量绑定")]),t._v(" "),a("button",{staticClass:"btn btn-danger",on:{click:t.cancelBindApi}},[t._v("批量解绑")])])]):t._e(),t._v(" "),t._l(t.tableData,function(e,i){return t.tableData.length>0?[a("yf-table-bind",{attrs:{arr:e,clearStatus:t.clearStatus,tableHeader:t.tableHeader,arrIndex:i},on:{checkCountChange:t.checkCountChange,operaApiBind:t.operaApiBind}})]:t._e()}),t._v(" "),a("yf-right")],2)},s=[],n={render:i,staticRenderFns:s};e.a=n},upzl:function(t,e,a){var i=a("JnIT");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a("rjj0")("9c5c87a4",i,!0)},vLop:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("GLNZ"),s=a("sStd"),n=a("VU/8"),c=n(i.a,s.a,null,null,null);e.default=c.exports}});