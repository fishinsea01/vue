webpackJsonp([10],{"+bdf":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("va-box",{attrs:{title:t.title,theme:"box-primary",isBorder:!0,widgetType:""}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("div",{staticClass:"form-horizontal"},[a("div",{staticClass:"box-body"},[t._l(t.checkItems,function(e,s){return a("div",{class:{"col-md-5":!0,"col-md-offset-1":s%2==1}},["text"===e.type?a("div",{staticClass:"form-group"},[a("label",{staticClass:"col-sm-3 control-label"},[a("span",[t._v(t._s(e.title)+":")])]),t._v(" "),a("div",{staticClass:"col-sm-9"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"item.value"}],staticClass:"form-control",attrs:{type:"text",placeholder:e.placeholder},domProps:{value:e.value},on:{input:function(t){t.target.composing||(e.value=t.target.value)}}})])]):"select"===e.type?a("div",{staticClass:"form-group"},[a("label",{staticClass:"col-sm-3 control-label"},[a("span",[t._v(t._s(e.title))])]),t._v(" "),a("div",{staticClass:"col-sm-9"},[a("select",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"item.value"}],staticClass:"form-control",on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});e.value=t.target.multiple?a:a[0]}}},[a("option",{attrs:{value:""}},[t._v("请选择")]),t._v(" "),t._l(t.options,function(e,s){return a("option",{domProps:{value:e.value}},[t._v(t._s(e.label))])})],2)])]):t._e()])}),t._v(" "),a("div",{staticClass:"col-md-1"},[a("div",{staticClass:"form-group",attrs:{align:"right"}},[a("button",{staticClass:"btn btn-primary",on:{click:t.checkInfo}},[a("span",{staticClass:"fa  fa-search"},[t._v("查    询")])])])])],2)])])])},i=[],n={render:s,staticRenderFns:i};e.a=n},"4Dmm":function(t,e,a){"use strict";var s=a("HM+n");e.a={name:"YFCheckModule",data:function(){return{}},created:function(){console.log(this.title)},props:["checkItems","title","options","radios"],components:{"va-box":s.a},methods:{checkInfo:function(){this.$emit("checkBtnClick")}}}},"9IEN":function(t,e,a){e=t.exports=a("FZ+f")(!1),e.push([t.i,".checkbox[data-v-325a5ad9]{margin-top:0;margin-bottom:0}.table[data-v-325a5ad9]{margin-top:0}.box[data-v-325a5ad9]{margin-top:10px}",""])},Aesy:function(t,e,a){"use strict";e.a={name:"yf-right"}},"HM+n":function(t,e,a){"use strict";var s=a("Rm/k"),i=a("ZFrQ"),n=a("VU/8"),c=n(s.a,i.a,null,null,null);e.a=c.exports},JnIT:function(t,e,a){e=t.exports=a("FZ+f")(!1),e.push([t.i,".col-sm-3[data-v-14518542]{padding-right:5px;padding-left:0}",""])},MNKa:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("l9uG"),i=a("S5B2"),n=a("VU/8"),c=n(s.a,i.a,null,null,null);e.default=c.exports},"Rm/k":function(t,e,a){"use strict";e.a={name:"va-box",props:{widgetType:{type:String,default:"collapse"},title:{type:String},content:{type:String},theme:{type:String},isOpen:{type:Boolean,default:!0},isLoading:{type:Boolean,default:!1},isSolid:{type:Boolean,default:!1},isBorder:{type:Boolean,default:!1}},computed:{btnIcon:function(){return"collapse"===this.widgetType?this.isOpen?"fa fa-minus":"fa fa-plus":"remove"===this.widgetType?"fa fa-times":""}},created:function(){}}},S5B2:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("row",[a("div",{staticClass:"col-md-12"},[a("h3",[t._v("菜单树")])])]),t._v(" "),a("row",[a("div",{staticClass:"col-md-12"},[a("div",{staticClass:"box box-solid"},[a("div",{staticClass:"box-body"},[a("div",{staticClass:"selectBox"},[a("div",[a("span",[t._v("角色ID")]),t._v("  \n                          "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.roleIds,expression:"roleIds"}],attrs:{type:"text",placeholder:"请输入角色ID"},domProps:{value:t.roleIds},on:{input:function(e){e.target.composing||(t.roleIds=e.target.value)}}}),t._v(" "),a("button",{staticClass:"btn btn-primary btn-sm",attrs:{"data-toggle":"modal","data-target":"#modal-default"},on:{click:t.checkBtnClick}},[a("span",{staticClass:"fa fa-search"},[t._v("查  询")])]),t._v(" "),a("button",{staticClass:"btn btn-success btn-sm",attrs:{"data-toggle":"modal","data-target":"#modal-default"},on:{click:t.addNode}},[t._v("绑  定")])])]),t._v(" "),t.ztreeDataSource.length>0?a("div",{staticClass:"spa"},[a("el-tree",{ref:"tree",attrs:{data:t.ztreeDataSource,props:t.defaultProps,"show-checkbox":"","node-key":"id","expand-on-click-node":!1,"highlight-current":""},on:{click:t.getCheckedKeys}})],1):t._e()])])])]),t._v(" "),a("yf-right")],1)},i=[],n={render:s,staticRenderFns:i};e.a=n},TlX0:function(t,e,a){"use strict";e.a={name:"table-bind",data:function(){return{checkAll:!1,checkIds:[]}},props:["tableHeader","arr","arrIndex","clearStatus"],methods:{bindApi:function(t){this.$emit("operaApiBind",[1,t])},cancelBindApi:function(t){this.$emit("operaApiBind",[0,t])},changeState:function(){this.checkIds=[],1==this.checkAll&&this.arr.list.forEach(function(t){this.checkIds.push(t.id)},this)},apiSatus:function(t){var e="";switch(t){case 1:e="正常";break;case 2:e="开发中";break;case 3:e="测试中";break;case 9:e="禁用"}return e},apiBindStatus:function(t){var e="";switch(t){case 1:e="已经绑定";break;case 0:e="未绑定"}return e}},watch:{checkIds:{handler:function(){this.checkIds.length==this.arr.list.length?this.checkAll=!0:this.checkAll=!1,this.$emit("checkCountChange",[this.arrIndex,this.checkIds])},deep:!0},clearStatus:{handler:function(){this.checkIds=[]}}}}},WmRa:function(t,e,a){"use strict";function s(t){a("upzl")}var i=a("4Dmm"),n=a("+bdf"),c=a("VU/8"),o=s,r=c(i.a,n.a,o,"data-v-14518542",null);e.a=r.exports},ZFrQ:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"box",class:[t.theme,this.isOpen?"":"collapsed-box",t.isSolid?"box-solid":""]},[a("div",{staticClass:"box-header",class:t.isBorder||t.isSolid?"with-border":""},[t._t("icon-title"),t._v(" "),a("h3",{staticClass:"box-title"},[t._v(t._s(t.title))]),t._v(" "),t._m(0)],2),t._v(" "),a("div",{staticClass:"box-body"},[t._t("content")],2),t._v(" "),t.$slots.footer?a("div",{staticClass:"box-footer"},[t._t("footer")],2):t._e(),t._v(" "),this.isLoading?a("div",{staticClass:"overlay"},[a("i",{staticClass:"fa fa-refresh fa-spin"})]):t._e()])},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"box-tools pull-right"},[a("button",{staticClass:"btn btn-box-tool",attrs:{type:"button","data-widget":"collapse"}},[a("i",{staticClass:"fa fa-minus"})])])}],n={render:s,staticRenderFns:i};e.a=n},auua:function(t,e,a){"use strict";function s(t){a("ovaj")}var i=a("TlX0"),n=a("eCjj"),c=a("VU/8"),o=s,r=c(i.a,n.a,o,"data-v-325a5ad9",null);e.a=r.exports},eCjj:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("row",[a("div",{staticClass:"col-xs-12"},[a("div",{staticClass:"box"},[a("div",{staticClass:"box-header"},[a("h3",{staticClass:"box-title"},[t._v(t._s(t.arr.name))])]),t._v(" "),a("div",{staticClass:"box-body table-responsive no-padding"},[a("table",{staticClass:"table table-hover"},[a("tbody",[a("tr",t._l(t.tableHeader,function(e,s){return a("th",{key:"app"+s},[0===s?a("div",{staticClass:"checkbox"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.checkAll,expression:"checkAll"}],attrs:{type:"checkbox",id:"group"+t.arrIndex},domProps:{value:"group"+t.arrIndex,checked:Array.isArray(t.checkAll)?t._i(t.checkAll,"group"+t.arrIndex)>-1:t.checkAll},on:{click:t.changeState,__c:function(e){var a=t.checkAll,s=e.target,i=!!s.checked;if(Array.isArray(a)){var n="group"+t.arrIndex,c=t._i(a,n);s.checked?c<0&&(t.checkAll=a.concat([n])):c>-1&&(t.checkAll=a.slice(0,c).concat(a.slice(c+1)))}else t.checkAll=i}}}),t._v(" "),a("label",{attrs:{for:"group"+t.arrIndex}},[t._v(t._s(e))])]):a("label",[t._v(t._s(e))])])})),t._v(" "),t._l(t.arr.list,function(e,s){return a("tr",{key:"apidata"+s,staticStyle:{width:"100%"}},[a("td",{staticStyle:{width:"15%"}},[a("div",{staticClass:"checkbox"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.checkIds,expression:"checkIds"}],class:"group"+t.arrIndex,attrs:{type:"checkbox",id:e.id},domProps:{value:e.id,checked:Array.isArray(t.checkIds)?t._i(t.checkIds,e.id)>-1:t.checkIds},on:{__c:function(a){var s=t.checkIds,i=a.target,n=!!i.checked;if(Array.isArray(s)){var c=e.id,o=t._i(s,c);i.checked?o<0&&(t.checkIds=s.concat([c])):o>-1&&(t.checkIds=s.slice(0,o).concat(s.slice(o+1)))}else t.checkIds=n}}}),t._v(" "),a("label",{attrs:{for:e.id}},[t._v(t._s(e.id))])])]),t._v(" "),a("td",{staticStyle:{width:"15%"}},[t._v(t._s(e.name))]),t._v(" "),a("td",{staticStyle:{width:"15%"}},[t._v(t._s(e.action))]),t._v(" "),a("td",{staticStyle:{width:"10%"}},[t._v(t._s(t.apiBindStatus(e.bind)))]),t._v(" "),a("td",{staticStyle:{width:"10%"}},[t._v(t._s(t.apiSatus(e.status)))]),t._v(" "),a("td",{staticStyle:{width:"15%"}},[0==e.bind?a("button",{staticClass:"btn btn-success",on:{click:function(a){t.bindApi(e.id)}}},[t._v("绑定")]):t._e(),t._v(" "),1==e.bind?a("button",{staticClass:"btn btn-danger",on:{click:function(a){t.cancelBindApi(e.id)}}},[t._v("解绑")]):t._e()])])})],2)])])])])])},i=[],n={render:s,staticRenderFns:i};e.a=n},l9uG:function(t,e,a){"use strict";var s=a("Xxa5"),i=a.n(s),n=a("exGp"),c=a.n(n),o=a("WmRa"),r=a("qYpY"),l=a("auua");e.a={name:"operate-role-menu",data:function(){return{roleIds:[],menuIds:[],ztreeDataSource:[],defaultProps:{children:"items",label:"name"},allmenuids:[],othermenuids:[],operData:{},operNoData:{},binds:[]}},created:function(){var t=this.$route.query.id;console.log("created",this.$route.query.id),void 0!=t&&""!=t&&(this.roleIds=t,this.searchTreeInfo())},mounted:function(){},components:{"yf-checkmodule":o.a,"yf-right":r.a,"yf-table-bind":l.a},methods:{checkBtnClick:function(){""==this.roleIds?alert("请输入角色ID"):this.searchTreeInfo()},addNode:function(){var t=this,e=[],a=[],s=[],i=[];t.getCheckedKeys(),this.menuIds.forEach(function(e){t.allmenuids.forEach(function(t){e==t?i.push(t):s.push(t)},t)}),t.othermenuids=s,""!=t.othermenuids&&t.othermenuids.forEach(function(e){a.push({roleId:t.roleIds+"",menuId:e+""})}),""!=t.menuIds&&t.menuIds.forEach(function(a){e.push({roleId:t.roleIds+"",menuId:a+""})}),t.operData={binds:e,handle:1},t.operNoData={binds:a,handle:2},this.roleMenuBind(t.operNoData)},setCheckedKeysabc:function(){var t=this,e=[];this.ztreeDataSource.forEach(function(a){""!=a.items&&a.items.forEach(function(a){""!=a&&(""!=a.items?a.items.forEach(function(t){1==t.chooseFlag&&e.push(t.id)},t):1==a.chooseFlag&&e.push(a.id))},t)},this),t.$refs.tree.setCheckedKeys(e)},getCheckedKeys:function(){this.menuIds=this.$refs.tree.getCheckedKeys(),console.log(this.menuIds)},searchTreeInfo:function(){function t(){return e.apply(this,arguments)}var e=c()(i.a.mark(function t(){var e,a,s,n,c,o,r;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e={roleId:this.roleIds},a={action:"system.role.menu.tree",body:e},console.log("requestData",a),s=this,t.next=6,s.$http.post("http://d.umq.me/japi-manage/v1/gateway",a);case 6:n=t.sent,c=n.data,o=c.code,r=c.body,console.log("role.query",r,o),"00000"===o&&(this.ztreeDataSource=r,this.round(),this.$nextTick(function(){this.setCheckedKeysabc()}));case 12:case"end":return t.stop()}},t,this)}));return t}(),roleMenuBind:function(){function t(t){return e.apply(this,arguments)}var e=c()(i.a.mark(function t(e){var a,s,n,c,o,r;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a={action:"system.role.menu.bind",body:e},s=this,t.next=4,s.$http.post("http://d.umq.me/japi-manage/v1/gateway",a);case 4:n=t.sent,c=n.data,o=c.code,r=c.body,"00000"===o&&(2==e.handle?s.roleMenuBind(s.operData):this.searchTreeInfo());case 9:case"end":return t.stop()}},t,this)}));return t}(),round:function(){var t=this,e=[];this.ztreeDataSource.forEach(function(a){e.push(a.id),""!=a.items&&a.items.forEach(function(a){e.push(a.id),""!=a.items&&a.items.forEach(function(t){e.push(t.id)},t)},t)},this),this.allmenuids=e}}}},oNS5:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{staticClass:"text-center"},[t._v("版权归@2017-2018 优麦圈所有")])},i=[],n={render:s,staticRenderFns:i};e.a=n},ovaj:function(t,e,a){var s=a("9IEN");"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);a("rjj0")("45abf1c9",s,!0)},qYpY:function(t,e,a){"use strict";var s=a("Aesy"),i=a("oNS5"),n=a("VU/8"),c=n(s.a,i.a,null,null,null);e.a=c.exports},upzl:function(t,e,a){var s=a("JnIT");"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);a("rjj0")("9c5c87a4",s,!0)}});